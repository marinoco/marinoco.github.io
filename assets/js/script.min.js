document.addEventListener("DOMContentLoaded",function(){updateCopyright();addTitleIcons();loadSvgs();loadImages();initModal();handleSidebarResize()});function updateCopyright(){const e=document.getElementById("year"),n=new Date().getFullYear();e.textContent=n}function addTitleIcons(){document.querySelectorAll('.title[data-icon="true"]').forEach(function(e){const n=document.createElement("span");n.classList.add("title__icon"),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)})}function loadSvgs(){document.querySelectorAll("[data-svg]").forEach(function(e){const n=e.getAttribute("data-svg"),t=`../assets/images/${n}.svg`;fetch(t).then(e=>e.text()).then(n=>{e.innerHTML=n,e.removeAttribute("data-svg")}).catch(e=>{console.error("SVGの読み込みエラー:",e)})})}function loadImages(){const e="../assets/images/",n=[".jpg",".png"];function t(n,t,a,d){n.src=`${e}${t}${a}${d}`,n.removeAttribute("data-src")}function a(d,a,i){let s=0;function r(){const c=n[s],o=new Image;o.onload=function(){t(d,a,i,c)},o.onerror=function(){++s<n.length&&r()},o.src=`${e}${a}${i}${c}`}r()}const d=document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0,i=window.innerWidth,s=document.querySelectorAll("[data-src]");s.forEach(function(s){const r=s.dataset.src,c=i<=767?"-sp":"";d?t(s,r,c,".webp"):a(s,r,c)})}function initModal(){var e=document.createElement("div");e.classList.add("overlay");var n=document.createElement("img");n.classList.add("overlay__item");var t=document.createElement("button");t.classList.add("overlay__close"),t.innerHTML="&times;",e.appendChild(n),e.appendChild(t),document.body.appendChild(e);var a=document.querySelectorAll('.gallery__link[data-modal="true"]'),d=function(t){n.setAttribute("src",t),e.classList.add("active"),setTimeout(function(){n.classList.add("active")},100)},i=function(){n.classList.remove("active"),setTimeout(function(){e.classList.remove("active")},300)};a.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),d(this.getAttribute("href"))})}),t.addEventListener("click",i),e.addEventListener("click",function(n){n.target===e&&i()})}function handleSidebarResize(){const e=document.querySelector(".sidebar"),n=document.querySelector(".aside-section"),t=document.querySelector(".main"),a=window.innerWidth<=768;a?t.appendChild(n):e.appendChild(n)}window.addEventListener("resize",handleSidebarResize);